apply plugin: 'android'

repositories {
    maven { url 'http://www.bugsense.com/gradle/' }
}

android {

    compileSdkVersion 19
    buildToolsVersion '19.0.3'

//    Scheme for version codes: ##@@$$$ , using:
//    ##   - the first two digits for the API Level,
//    @@   - the second and third digits for the minimum and maximum screen size
//           (1 - 4 indicating each of the four sizes) or to denote the texture formats
//    $$$$ - the last four digits for the app version.

    defaultConfig {
        minSdkVersion 15
        targetSdkVersion 19
        versionCode 13002150
        versionName "2.15"
    }

    signingConfigs {

        release
    }

    buildTypes {

        release {

            runProguard false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.txt'

            debuggable false

            buildConfigField "String", "BUGSENSE_LICENSE", "\"" + bugsense_release + "\""
            buildConfigField "String", "ANALYTICS_TRACK_ID", "\"" + analytics_track_id + "\""

            signingConfig project.hasProperty('android_keystore') ? signingConfigs.release : signingConfigs.debug
        }

        debug {

            runProguard false

            debuggable true

            buildConfigField "String", "BUGSENSE_LICENSE", "\"" + bugsense_debug + "\""
            buildConfigField "String", "ANALYTICS_TRACK_ID", 'null'
        }

        CI {
            debuggable true
            runProguard false

            buildConfigField "String", "BUGSENSE_LICENSE", 'null'
            buildConfigField "String", "ANALYTICS_TRACK_ID", 'null'
        }
    }

    if (project.hasProperty('android_keystore') &&
        project.hasProperty('android_keystore_password') &&
        project.hasProperty('android_key_alias') &&
        project.hasProperty('keyPassword'))
    {
        android.signingConfigs.release.storeFile = file(android_keystore)
        android.signingConfigs.release.storePassword = android_keystore_password
        android.signingConfigs.release.keyAlias = android_key_alias
        android.signingConfigs.release.keyPassword = android_key_password
    }
    else
    {
        buildTypes.release.signingConfig = null
    }

    sourceSets {

        main {

            java {
                srcDir 'src'
                exclude '**/excluded_from_build/**'
                exclude '**/ui/help/**'
            }

        }
    }
}

dependencies {
    compile 'com.android.support:appcompat-v7:+'


// https://github.com/tony19/logback-android
//    compile 'org.slf4j:slf4j-api:1.7.1'
//    compile 'com.github.tony19:logback-android-core:1.0.7-1'
//    compile 'com.github.tony19:logback-android-classic:1.0.7-1'

    compile 'com.bugsense.trace:bugsense:3.6'
    compile 'de.keyboardsurfer.android.widget:crouton:1.8.4'
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile files('libs/libGoogleAnalyticsV2.jar')
    compile project(':android-proxy-library')
}
